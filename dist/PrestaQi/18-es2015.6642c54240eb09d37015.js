(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"7QPh":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("fXoL"),o=a("RL7/"),c=a("tyNb"),i=a("jtrZ");let r=(()=>{class t{constructor(t,e,a,n){this.auth=t,this.router=e,this.routeActivate=a,this.appConfig=n,n.lastRoute=""}canActivate(t,e){return this.auth.isAuthenticated()?!!this.auth.checkRols(t.data.roles)||(this.router.navigate(["/"]),!1):(this.appConfig.lastRoute=e.url,this.router.navigate(["login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(o.a),n.Wb(c.d),n.Wb(c.a),n.Wb(i.a))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ZtiS:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("fXoL"),o=a("RL7/"),c=a("tyNb");let i=(()=>{class t{constructor(t,e){this.auth=t,this.router=e}canActivate(t,e){return!!this.auth.checkRols(t.data.roles)||(this.router.navigate(["login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(o.a),n.Wb(c.d))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"qT/U":function(t,e,a){"use strict";a.r(e),a.d(e,"PendingRecordModule",(function(){return ct}));var n=a("ofXK"),o=a("4TcP"),c=a("tyNb"),i=a("7QPh"),r=a("ZtiS"),s=a("tmTa"),d=a("fXoL"),l=a("tk/3"),p=a("7RFJ");let b=(()=>{class t{constructor(t,e){this.http=t,this.constant=e}fetchAcrediteds(t=1,e=20,a=""){return this.http.post(this.constant.api+"Accrediteds/GetExternal",{page:t,numrecord:e,filter:a})}actionDocument(t){return this.http.post(this.constant.api+"Accrediteds/NotificationDocument",t)}approveDocuments(t){return this.http.put(`${this.constant.api}Accrediteds/ApproveDocuments/${t}`,{})}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(l.b),d.Wb(p.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=a("znSr"),h=a("LcAk"),g=a("xm3d"),m=a("0DX0"),f=a("J0hL"),R=a("Xlwt"),S=a("TY1r"),v=a("A2Vd"),w=a("XiUz"),y=a("TnAc"),k=a("3Pt+"),A=a("IkSl");function E(t,e){if(1&t&&d.Nb(0,"img",17),2&t){const t=d.ec().index,e=d.ec();d.kc("src",e.data.path[t],d.Bc)}}function x(t,e){if(1&t&&d.Nb(0,"pdf-viewer",18),2&t){const t=d.ec().index,e=d.ec();d.kc("src",e.data.path[t])}}function I(t,e){if(1&t&&(d.Sb(0,"div",7),d.Sb(1,"div",13),d.Hc(2,E,1,1,"img",14),d.Hc(3,x,1,1,"pdf-viewer",15),d.Sb(4,"a",16),d.Jc(5,"Descargar"),d.Rb(),d.Rb(),d.Rb()),2&t){const t=e.$implicit,a=e.index,n=d.ec();d.zb(2),d.kc("ngIf","image"===t),d.zb(1),d.kc("ngIf","pdf"===t),d.zb(1),d.kc("href",n.data.path[a],d.Bc)("download",n.getNameFile(n.data.path[a]))}}const P=function(){return{"font-family":"MontserratBold"}};let D=(()=>{class t{constructor(t,e,a,n){this.snackBar=t,this.data=e,this.dialogRef=a,this.constant=n,this.dialogRef.disableClose=!0,Array.isArray(this.data.path)||(this.data.path=[this.data.path],Array.isArray(this.data.type)||(this.data.type=[this.data.type])),this.data.path=this.data.path.map(t=>t.includes("http")?t:`${this.constant.api.replace("api/","")}${t.split("/").pop()}`)}ngOnInit(){}close(t){t||this.message?this.dialogRef.close({approve:t,message:this.message}):this.snackBar.openFromComponent(g.a,{data:{message:"REQUIERE",subMessage:"Ingrese un motivo de rechazo",type:"warning"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:2500})}getNameFile(t){const e=t.split("/");return e[e.length-1]}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(m.b),d.Mb(h.a),d.Mb(h.h),d.Mb(p.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-preview-document"]],decls:17,vars:6,consts:[[1,"dialog-content-wrapper"],["matDialogTitle","",1,"m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title",3,"ngStyle"],["mat-button","",1,"toggle-button-navbar","mat-icon-button",3,"mat-dialog-close"],["mat-dialog-content","","appPerfectScrollbar","",1,"pl-25","pr-25","m-0"],["fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row"],["matInput","","placeholder","Motivo de rechazo",2,"border","1px solid #ddd","margin-top","24px","padding","8px",3,"ngModel","ngModelChange"],["mat-dialog-actions","","fxLayoutAlign","space-around center",1,"m-0"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px"],[1,"content-btn-left"],["mat-button","","color","warn",3,"click"],["fxLayout","column"],["alt","","srcset","",3,"src",4,"ngIf"],["style","display: block;width: 500px;height: 400px;",3,"src",4,"ngIf"],["target","_blank",2,"margin-top","10px",3,"href","download"],["alt","","srcset","",3,"src"],[2,"display","block","width","500px","height","400px",3,"src"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"mat-toolbar",1),d.Sb(2,"div",2),d.Sb(3,"span",3),d.Jc(4),d.Rb(),d.Sb(5,"button",4),d.Sb(6,"mat-icon"),d.Jc(7,"close"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(8,"div",5),d.Hc(9,I,6,4,"div",6),d.Sb(10,"div",7),d.Sb(11,"textarea",8),d.ac("ngModelChange",(function(t){return e.message=t})),d.Rb(),d.Rb(),d.Rb(),d.Sb(12,"div",9),d.Sb(13,"div",10),d.Sb(14,"div",11),d.Sb(15,"button",12),d.ac("click",(function(){return e.close(!1)})),d.Jc(16,"RECHAZAR"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.zb(3),d.kc("ngStyle",d.nc(5,P)),d.zb(1),d.Kc(e.data.title),d.zb(1),d.kc("mat-dialog-close",!1),d.zb(4),d.kc("ngForOf",e.data.type),d.zb(2),d.kc("ngModel",e.message))},directives:[f.a,h.i,w.b,w.f,w.e,n.w,u.d,R.b,h.d,S.a,h.f,y.a,n.s,v.b,k.c,k.r,k.u,h.c,w.g,n.t,A.a],styles:["app-preview-document[_ngcontent-%COMP%]   pdf-viewer[_ngcontent-%COMP%]{width:100%}"]}),t})();var C=a("sCmA"),z=a("G/Ji"),J=a("1OTw");function M(t,e){1&t&&(d.Sb(0,"th",15),d.Jc(1," Nombre "),d.Rb())}function N(t,e){if(1&t&&(d.Sb(0,"td",16),d.Jc(1),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.Mc(" ",t.first_Name," ",t.last_Name," ")}}function H(t,e){1&t&&(d.Sb(0,"th",15),d.Jc(1," Numero de Empleado "),d.Rb())}function L(t,e){if(1&t&&(d.Sb(0,"td",16),d.Jc(1),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.Lc(" ",t.numberEmployee," ")}}function F(t,e){1&t&&(d.Sb(0,"th",15),d.Jc(1," CURP "),d.Rb())}function T(t,e){if(1&t&&(d.Sb(0,"td",16),d.Jc(1),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.Lc(" ",t.curp," ")}}function O(t,e){1&t&&(d.Sb(0,"th",15),d.Jc(1," Numero de Cuenta "),d.Rb())}function $(t,e){if(1&t&&(d.Sb(0,"td",16),d.Jc(1),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.Lc(" ",t.account_Number," ")}}function B(t,e){1&t&&(d.Sb(0,"th",15),d.Jc(1," CLABE interbancaria "),d.Rb())}function _(t,e){if(1&t&&(d.Sb(0,"td",16),d.Jc(1),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.Lc(" ",t.clabe," ")}}function Q(t,e){1&t&&(d.Sb(0,"th",15),d.Jc(1," Fecha de Registro "),d.Rb())}function j(t,e){if(1&t&&(d.Sb(0,"td",16),d.Jc(1),d.fc(2,"date"),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.Lc(" ",d.gc(2,1,t.created_at)," ")}}function X(t,e){1&t&&(d.Sb(0,"th",15),d.Jc(1," Estatus "),d.Rb())}function W(t,e){if(1&t&&(d.Sb(0,"td",16),d.Jc(1),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.Lc(" ",t.approvedDocuments?"Aprobado":"Por Aprobar"," ")}}function U(t,e){1&t&&(d.Sb(0,"th",15),d.Jc(1," Acciones "),d.Rb())}function G(t,e){1&t&&d.Nb(0,"mat-spinner",19),2&t&&d.kc("diameter",30)}function K(t,e){if(1&t){const t=d.Tb();d.Qb(0),d.Sb(1,"button",20),d.Sb(2,"mat-icon"),d.Jc(3,"more_vert"),d.Rb(),d.Rb(),d.Sb(4,"mat-menu",null,21),d.Sb(6,"button",22),d.ac("click",(function(){d.yc(t);const e=d.ec().$implicit;return d.ec().approveDocuments(e.id)})),d.Sb(7,"mat-icon"),d.Jc(8,"done"),d.Rb(),d.Sb(9,"span"),d.Jc(10,"Aprobar"),d.Rb(),d.Rb(),d.Sb(11,"button",22),d.ac("click",(function(){d.yc(t);const e=d.ec().$implicit;return d.ec().viewDocument("SELFIE",e)})),d.Sb(12,"mat-icon"),d.Jc(13,"photo_camera"),d.Rb(),d.Sb(14,"span"),d.Jc(15,"Selfie"),d.Rb(),d.Rb(),d.Sb(16,"button",22),d.ac("click",(function(){d.yc(t);const e=d.ec().$implicit;return d.ec().viewDocument("INE",e)})),d.Sb(17,"mat-icon"),d.Jc(18,"account_box"),d.Rb(),d.Sb(19,"span"),d.Jc(20,"Ine"),d.Rb(),d.Rb(),d.Sb(21,"button",22),d.ac("click",(function(){d.yc(t);const e=d.ec().$implicit;return d.ec().viewDocument("ESTADO DE CUENTA",e)})),d.Sb(22,"mat-icon"),d.Jc(23,"description"),d.Rb(),d.Sb(24,"span"),d.Jc(25,"Estado de Cuenta"),d.Rb(),d.Rb(),d.Sb(26,"button",22),d.ac("click",(function(){d.yc(t);const e=d.ec().$implicit;return d.ec().viewDocument("RECIBO DE NOMINA",e)})),d.Sb(27,"mat-icon"),d.Jc(28,"receipt_long"),d.Rb(),d.Sb(29,"span"),d.Jc(30,"Recibo de Nomina"),d.Rb(),d.Rb(),d.Rb(),d.Pb()}if(2&t){const t=d.uc(5);d.zb(1),d.kc("matMenuTriggerFor",t)}}function Z(t,e){if(1&t&&(d.Sb(0,"td",16),d.Hc(1,G,1,1,"mat-spinner",17),d.Hc(2,K,31,1,"ng-container",18),d.Rb()),2&t){const t=e.$implicit,a=d.ec();d.zb(1),d.kc("ngIf",a.loadingProccess(t.id)),d.zb(1),d.kc("ngIf",!a.loadingProccess(t.id))}}function q(t,e){1&t&&d.Nb(0,"tr",23)}function V(t,e){1&t&&d.Nb(0,"tr",24)}const Y=function(){return[50,100,500]};let tt=(()=>{class t{constructor(t,e,a){this.dialog=t,this.service=e,this.snackBar=a,this.columnToDisplay=["fullname","employee_number","curp","account_number","clabe","date","status","actions"],this.dataSource=new s.o,this.changePage=new d.n,this.proccessIds=[]}changeTable(t){this.changePage.emit(t)}viewDocument(t,e){let a="";try{a=this.processPath(t,e)}catch(c){return void this.snackBar.openFromComponent(g.a,{data:{message:"ERROR",subMessage:c.toString(),type:"error"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:2500})}const n=this.typeFile(a),o=this.getIdDocument(t,e);this.dialog.open(D,{data:{title:t,path:a,type:n}}).afterClosed().subscribe(a=>{a&&this.service.actionDocument({Type:t,Approve:a.approve,Message:a.message,IdDocument:o,AccreditedId:e.id}).subscribe(t=>{this.snackBar.openFromComponent(g.a,{data:{message:"EXITOSO",subMessage:"Mensaje enviado",type:"success"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:2500})},t=>{this.snackBar.openFromComponent(g.a,{data:{message:"ERROR",subMessage:"Error al enviar el mensaje",type:"error"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:2500})})})}processPath(t,e){let a="";switch(t){case"INE":if(null==e.ineAccount)throw new Error("El Archivo no a sido cargado");a=[e.ineAccount.pathFileBack,e.ineAccount.pathFileFront];break;case"SELFIE":if(null==e.selfie)throw new Error("El Archivo no a sido cargado");a=e.selfie.pathFile;break;case"ESTADO DE CUENTA":if(null==e.statusAccount)throw new Error("El Archivo no a sido cargado");a=e.statusAccount.pathFile;break;case"RECIBO DE NOMINA":if(null==e.paySheet)throw new Error("El Archivo no a sido cargado");a=e.paySheetInitial.map(t=>t.pathFile)}return a}getIdDocument(t,e){let a=0;switch(t){case"INE":if(null==e.ineAccount)throw new Error("El Archivo no a sido cargado");a=e.ineAccount.id;break;case"SELFIE":if(null==e.selfie)throw new Error("El Archivo no a sido cargado");a=e.selfie.id;break;case"ESTADO DE CUENTA":if(null==e.statusAccount)throw new Error("El Archivo no a sido cargado");a=e.statusAccount.id;break;case"RECIBO DE NOMINA":if(null==e.paySheet)throw new Error("El Archivo no a sido cargado");a=e.paySheet.id}return a}typeFile(t){let e="image";if(Array.isArray(t))e=[],t.forEach(t=>{const a=t.split(".");switch(a[a.length-1]){case"jpg":case"jpeg":case"png":e.push("image");break;case"pdf":e.push("pdf")}});else{const a=t.split(".");switch(a[a.length-1]){case"jpg":case"jpeg":case"png":e="image";break;case"pdf":e="pdf"}}return e}approveDocuments(t){this.proccessIds.push(t),this.service.approveDocuments(t).subscribe(e=>{this.snackBar.openFromComponent(g.a,{data:{message:"EXITOSO",subMessage:"Los documentos fueron aprovados",type:"success"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:2500}),this.proccessIds=this.proccessIds.filter(e=>e!==t),this.changePage.emit({pageIndex:0,pageSize:50})},e=>{this.snackBar.openFromComponent(g.a,{data:{message:"ERROR",subMessage:"Intentelo mas tarde",type:"error"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:2500}),this.proccessIds=this.proccessIds.filter(e=>e!==t)})}loadingProccess(t){return this.proccessIds.filter(e=>e===t).length>0}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(h.b),d.Mb(b),d.Mb(m.b))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-table-pending-records"]],inputs:{totalRow:"totalRow",dataSource:"dataSource"},outputs:{changePage:"changePage"},decls:29,vars:7,consts:[["mat-table","",3,"dataSource"],["table",""],["matColumnDef","fullname"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employee_number"],["matColumnDef","curp"],["matColumnDef","account_number"],["matColumnDef","clabe"],["matColumnDef","date"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"diameter"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.Sb(0,"table",0,1),d.Qb(2,2),d.Hc(3,M,2,0,"th",3),d.Hc(4,N,2,2,"td",4),d.Pb(),d.Qb(5,5),d.Hc(6,H,2,0,"th",3),d.Hc(7,L,2,1,"td",4),d.Pb(),d.Qb(8,6),d.Hc(9,F,2,0,"th",3),d.Hc(10,T,2,1,"td",4),d.Pb(),d.Qb(11,7),d.Hc(12,O,2,0,"th",3),d.Hc(13,$,2,1,"td",4),d.Pb(),d.Qb(14,8),d.Hc(15,B,2,0,"th",3),d.Hc(16,_,2,1,"td",4),d.Pb(),d.Qb(17,9),d.Hc(18,Q,2,0,"th",3),d.Hc(19,j,3,3,"td",4),d.Pb(),d.Qb(20,10),d.Hc(21,X,2,0,"th",3),d.Hc(22,W,2,1,"td",4),d.Pb(),d.Qb(23,11),d.Hc(24,U,2,0,"th",3),d.Hc(25,Z,3,2,"td",4),d.Pb(),d.Hc(26,q,1,0,"tr",12),d.Hc(27,V,1,0,"tr",13),d.Rb(),d.Sb(28,"mat-paginator",14),d.ac("page",(function(t){return e.changeTable(t)})),d.Rb()),2&t&&(d.kc("dataSource",e.dataSource),d.zb(26),d.kc("matHeaderRowDef",e.columnToDisplay),d.zb(1),d.kc("matRowDefColumns",e.columnToDisplay),d.zb(1),d.kc("length",e.totalRow)("pageSize",50)("pageSizeOptions",d.nc(6,Y)))},directives:[s.n,s.c,s.i,s.b,s.k,s.m,C.a,s.h,s.a,n.t,z.c,R.b,J.d,S.a,J.e,J.b,s.j,s.l],pipes:[n.f],styles:["app-table-pending-records table{width:100%;border-radius:5px;border:1px solid #cacee6}app-table-pending-records table tr:nth-child(2n){background-color:#f9f9f9}app-table-pending-records table tr td{padding-right:12px!important}app-table-pending-records table .content-name{display:flex;align-items:center}app-table-pending-records table .element-action .sub-table td{padding:0}"],encapsulation:2}),t})();function et(t,e){1&t&&(d.Sb(0,"div",8),d.Nb(1,"mat-spinner",9),d.Rb())}const at=function(){return{"font-family":"MontserratBold"}},nt=[{path:"",component:(()=>{class t{constructor(t){this.rest=t,this.dataSource=new s.o,this.totalRow=0,this.loading=!1,this.fetchPendingRecords()}fetchPendingRecords(t=1,e=50,a=""){this.loading=!0,this.rest.fetchAcrediteds(t,e,a).subscribe(t=>{console.log(t),this.dataSource.data=t.data.accrediteds,this.totalRow=t.data.totalRecord,this.loading=!1},t=>{this.loading=!1})}changePage(t){this.fetchPendingRecords(t.pageIndex+1,t.pageSize,"")}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(b))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-pending-records"]],decls:10,vars:5,consts:[[1,"container","module-container"],[1,"content-breadcrumbs"],[3,"ngStyle"],[1,"breadcrumbs"],[1,"content-table","mat-elevation-z3"],["id","contentTable",1,"table"],["class","content-loading",4,"ngIf"],[3,"dataSource","totalRow","changePage"],[1,"content-loading"],["diameter","40"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"h1",2),d.Jc(3,"Lista de Solicitudes"),d.Rb(),d.Sb(4,"div",3),d.Jc(5,"SNAC > Solicitudes"),d.Rb(),d.Rb(),d.Sb(6,"div",4),d.Sb(7,"div",5),d.Hc(8,et,2,0,"div",6),d.Sb(9,"app-table-pending-records",7),d.ac("changePage",(function(t){return e.changePage(t)})),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.zb(2),d.kc("ngStyle",d.nc(4,at)),d.zb(6),d.kc("ngIf",e.loading),d.zb(1),d.kc("dataSource",e.dataSource)("totalRow",e.totalRow))},directives:[n.w,u.d,n.t,tt,z.c],styles:["app-pending-records .container{padding:25px!important}@media (max-width:959px){app-pending-records .container{overflow:auto}}app-pending-records .container .content-breadcrumbs h1{color:#41434c;font-size:27px}app-pending-records .content-table{margin-top:25px;background-color:#fff;padding:20px;height:calc(100% - 92px);border-top-left-radius:10px;border-top-right-radius:10px}@media (max-width:959px){app-pending-records .content-table{height:auto;border-top-left-radius:10px;border-top-right-radius:10px}}app-pending-records .content-table .title{margin-bottom:25px}app-pending-records .content-table .title h3{margin:0;color:#41434c;font-size:20px}app-pending-records .content-table .title .line{background-color:#3cf;width:78px;height:5px;display:block;border-radius:5px}app-pending-records .content-table .table{overflow:auto!important;position:relative;height:100%}app-pending-records .content-table .table .content-loading{position:absolute;display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:hsla(0,0%,100%,.5);z-index:101}"],encapsulation:2}),t})(),canActivate:[i.a,r.a],data:{roles:["Administrador"]}}];let ot=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[c.h.forChild(nt)],c.h]}),t})(),ct=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},providers:[b],imports:[[n.c,o.a,ot]]}),t})()}}]);