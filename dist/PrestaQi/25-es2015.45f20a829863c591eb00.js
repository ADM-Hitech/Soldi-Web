(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"f+RC":function(t,a,e){"use strict";e.r(a),e.d(a,"RequestAdvanceModule",(function(){return Ot}));var n=e("ofXK"),i=e("4TcP"),o=e("tyNb"),c=e("wd/R"),d=e("Xxza"),s=e("LcAk"),l=e("cp0P"),r=e("xm3d"),b=e("fXoL"),m=e("0DX0"),u=e("J0hL"),p=e("Xlwt"),f=e("TY1r"),h=e("G/Ji"),g=e("XiUz"),y=e("znSr"),v=e("3uU/");function R(t,a){1&t&&(b.Sb(0,"div",22),b.Nb(1,"mat-spinner",23),b.Rb()),2&t&&(b.zb(1),b.kc("diameter",30))}function x(t,a){if(1&t&&(b.Qb(0),b.Sb(1,"div",24),b.Sb(2,"div",14),b.Jc(3),b.Rb(),b.Rb(),b.Nb(4,"mat-divider"),b.Pb()),2&t){const t=a.$implicit;b.zb(3),b.Kc(t)}}const S=function(){return{"font-family":"MontserratBold"}};let w=(()=>{class t{constructor(t,a,e){this.dialogRef=t,this.data=a,this.snackBar=e,this.loading=!0,this.amount=0,this.bank="",this.account="**** **** **** 0000",this.totalDiscount=0,this.dateDetails=[],this.dayForPayment=0,this.comission=0,this.totalWithhold=0,this.totalWeek=0,this.amount=this.data.amount,Object(l.a)([this.data.service.getInfoBank(),this.data.service.preAdvance(this.data.paysheet,this.amount)]).subscribe(t=>{this.bank=t[0].data.user.institution_Name,this.account="**** **** **** "+t[0].data.user.account_Number.slice(-4),this.totalDiscount=t[1].data.advance.total_Withhold,this.dateDetails=t[1].data.details.map(t=>c(t.date_Payment).format("DD/MM/yyyy")),this.dayForPayment=t[1].data.advance.day_For_Payment,this.comission=t[1].data.advance.comission,this.totalWithhold=t[1].data.advance.total_Withhold,this.loading=!1,t[1].data.details.length>0&&(this.totalWeek=t[1].data.details[0].total_Payment)},t=>{this.snackBar.openFromComponent(r.a,{data:{message:"ERROR",subMessage:t.message,type:"error"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:3500}),this.loading=!1,this.dialogRef.close(!1)})}confirm(){this.dialogRef.close({dayForPayment:this.dayForPayment,comission:this.comission,totalWithhold:this.totalWithhold,dates:this.dateDetails,totalWeek:this.totalWeek})}}return t.\u0275fac=function(a){return new(a||t)(b.Mb(s.h),b.Mb(s.a),b.Mb(m.b))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-confirm-advance"]],decls:50,vars:23,consts:[[1,"dialog-content-wrapper"],["matDialogTitle","",1,"m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title",3,"ngStyle"],["mat-button","",1,"toggle-button-navbar","mat-icon-button",3,"mat-dialog-close"],["mat-dialog-content","",1,"pl-25","pr-25","m-0"],["class","cnt-loading",4,"ngIf"],[1,"content-amount"],[1,"label",3,"ngStyle"],[1,"amount",3,"ngStyle"],[1,"line"],[1,"cnt-info"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","column",1,"label"],["fxLayout","column",1,"value"],[1,"ctn-details"],[4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","space-around center",1,"m-0"],[1,"content-btn-left"],["mat-button","",3,"disabled","click"],[1,"content-btn-right"],["mat-button","",3,"mat-dialog-close"],[1,"cnt-loading"],[3,"diameter"],["fxLayout","row","fxLayoutAlign","center center"]],template:function(t,a){1&t&&(b.Sb(0,"div",0),b.Sb(1,"mat-toolbar",1),b.Sb(2,"div",2),b.Sb(3,"span",3),b.Jc(4,"Confirmar Adelanto"),b.Rb(),b.Sb(5,"button",4),b.Sb(6,"mat-icon"),b.Jc(7,"close"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(8,"div",5),b.Hc(9,R,2,1,"div",6),b.Sb(10,"div",7),b.Sb(11,"p",8),b.Jc(12,"Cantidad Solicitada"),b.Rb(),b.Sb(13,"p",9),b.Jc(14),b.fc(15,"currency"),b.Rb(),b.Nb(16,"span",10),b.Rb(),b.Sb(17,"div",11),b.Sb(18,"div",12),b.Sb(19,"div",13),b.Jc(20,"Banco"),b.Rb(),b.Sb(21,"div",14),b.Jc(22),b.fc(23,"uppercase"),b.Rb(),b.Rb(),b.Nb(24,"mat-divider"),b.Sb(25,"div",12),b.Sb(26,"div",13),b.Jc(27,"Cuenta"),b.Rb(),b.Sb(28,"div",14),b.Jc(29),b.Rb(),b.Rb(),b.Nb(30,"mat-divider"),b.Sb(31,"div",12),b.Sb(32,"div",13),b.Jc(33,"Total a descontar"),b.Rb(),b.Sb(34,"div",14),b.Jc(35),b.fc(36,"currency"),b.Rb(),b.Rb(),b.Nb(37,"mat-divider"),b.Nb(38,"br"),b.Rb(),b.Sb(39,"div",15),b.Sb(40,"p"),b.Jc(41,"Fecha de cobro"),b.Rb(),b.Hc(42,x,5,1,"ng-container",16),b.Rb(),b.Rb(),b.Sb(43,"div",17),b.Sb(44,"div",18),b.Sb(45,"button",19),b.ac("click",(function(){return a.confirm()})),b.Jc(46,"ACEPTAR"),b.Rb(),b.Rb(),b.Sb(47,"div",20),b.Sb(48,"button",21),b.Jc(49,"RECHAZAR"),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.zb(3),b.kc("ngStyle",b.nc(20,S)),b.zb(2),b.kc("mat-dialog-close",!1),b.zb(4),b.kc("ngIf",a.loading),b.zb(2),b.kc("ngStyle",b.nc(21,S)),b.zb(2),b.kc("ngStyle",b.nc(22,S)),b.zb(1),b.Kc(b.gc(15,14,a.amount)),b.zb(8),b.Kc(b.gc(23,16,a.bank)),b.zb(7),b.Kc(a.account),b.zb(6),b.Kc(b.gc(36,18,a.totalDiscount)),b.zb(7),b.kc("ngForOf",a.dateDetails),b.zb(3),b.Db("spinner",a.loading),b.kc("disabled",a.loading),b.zb(3),b.kc("mat-dialog-close",!1))},directives:[u.a,s.i,g.b,g.f,g.e,n.w,y.d,p.b,s.d,f.a,s.f,n.t,v.a,n.s,s.c,h.c],pipes:[n.d,n.G],styles:["app-confirm-advance .content-amount{background-color:#eff4ff;padding:12px 24px;border:2px solid #dee3ed;border-radius:5px;margin-top:24px;margin-bottom:24px}app-confirm-advance .content-amount p{margin:0;text-align:center}app-confirm-advance .content-amount p.label{color:#8e91a2}app-confirm-advance .content-amount p.amount{font-size:30px;font-weight:700;color:#006}app-confirm-advance .cnt-info{min-width:300px}app-confirm-advance .cnt-info .label{padding:5px 0}app-confirm-advance .cnt-info .value{padding:5px 0;font-weight:700}app-confirm-advance .ctn-details{margin-bottom:24px}app-confirm-advance .ctn-details p{margin:0 0 24px;text-align:center}app-confirm-advance .ctn-details .value{padding:5px 0;font-weight:700}app-confirm-advance .content-btn-left{margin-bottom:12px}app-confirm-advance .content-btn-left button{background-color:#41434c;color:#fff}app-confirm-advance .content-btn-left button:disabled{color:#fff!important;opacity:.5}app-confirm-advance .content-btn-right{margin-bottom:12px}app-confirm-advance .mat-dialog-content{position:relative}app-confirm-advance .mat-dialog-content .cnt-loading{position:absolute;background-color:#fff;width:100%;height:100%;z-index:1;left:0;display:flex;justify-content:center;align-items:center}"],encapsulation:2}),t})();var k=e("3Pt+"),P=e("IRfi"),D=e("A2Vd"),z=e("GBlY");function C(t,a){1&t&&(b.Sb(0,"div",13),b.Nb(1,"mat-spinner",14),b.Rb()),2&t&&(b.zb(1),b.kc("diameter",30))}function J(t,a){if(1&t){const t=b.Tb();b.Qb(0),b.Nb(1,"mat-slider",15),b.Sb(2,"div",16),b.Sb(3,"span"),b.Jc(4,"$0"),b.Rb(),b.Sb(5,"span"),b.Jc(6),b.fc(7,"currency"),b.Rb(),b.Rb(),b.Sb(8,"div",17),b.Sb(9,"button",18),b.ac("click",(function(){return b.yc(t),b.ec().request()})),b.Jc(10,"SOLICITAR"),b.Rb(),b.Rb(),b.Pb()}if(2&t){const t=b.ec();b.zb(1),b.kc("max",t.maxAmount),b.zb(5),b.Kc(b.gc(7,3,t.maxAmount)),b.zb(3),b.kc("disabled",t.form.invalid||t.maxAmount<=1)}}const W=function(){return{"font-family":"MontserratBold"}};let A=(()=>{class t{constructor(t,a,e,n){this.dialogRef=t,this.data=a,this.snackBar=e,this.formBuild=n,this.maxAmount=0,this.loading=!0,this.form=this.formBuild.group({amount:[{value:0,disabled:!1},k.F.min(1)]}),this.data.service.calculateAdvance(this.data.paysheet).subscribe(t=>{this.maxAmount=t,this.loading=!1},t=>{this.snackBar.openFromComponent(r.a,{data:{message:"ERROR",subMessage:t.message,type:"error"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:3500}),this.loading=!1,this.dialogRef.close(!1)})}request(){this.dialogRef.close({amount:this.form.get("amount").value})}}return t.\u0275fac=function(a){return new(a||t)(b.Mb(s.h),b.Mb(s.a),b.Mb(m.b),b.Mb(k.f))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-new-advance"]],decls:20,vars:7,consts:[[1,"dialog-content-wrapper"],["matDialogTitle","",1,"m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title",3,"ngStyle"],["mat-button","",1,"toggle-button-navbar","mat-icon-button",3,"mat-dialog-close"],["mat-dialog-content","",1,"pl-25","pr-25","m-0",3,"formGroup"],[1,"content-input"],["appearance","outline",2,"width","100%"],["matPrefix",""],["matInput","","disabled","true",3,"value"],["matSuffix",""],["fxLayout","row","class","mb-12","fxLayoutAlign","center center",4,"ngIf"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"mb-12"],[3,"diameter"],["formControlName","amount","min","0","step","1000",2,"width","100%",3,"max"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-12"],["fxLayout","row","fxLayoutAlign","center center",1,"ctn-btn","mb-12"],["mat-button","",3,"disabled","click"]],template:function(t,a){1&t&&(b.Sb(0,"div",0),b.Sb(1,"mat-toolbar",1),b.Sb(2,"div",2),b.Sb(3,"span",3),b.Jc(4,"Pedir Paro"),b.Rb(),b.Sb(5,"button",4),b.Sb(6,"mat-icon"),b.Jc(7,"close"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(8,"div",5),b.Sb(9,"h2"),b.Jc(10,"\xbfCu\xe1nto dinero necesitas?"),b.Rb(),b.Sb(11,"div",6),b.Sb(12,"mat-form-field",7),b.Sb(13,"mat-icon",8),b.Jc(14,"attach_money"),b.Rb(),b.Nb(15,"input",9),b.Sb(16,"mat-icon",10),b.Jc(17,"keyboard"),b.Rb(),b.Rb(),b.Rb(),b.Hc(18,C,2,1,"div",11),b.Hc(19,J,11,5,"ng-container",12),b.Rb(),b.Rb()),2&t&&(b.zb(3),b.kc("ngStyle",b.nc(6,W)),b.zb(2),b.kc("mat-dialog-close",!1),b.zb(3),b.kc("formGroup",a.form),b.zb(7),b.kc("value",a.form.get("amount").value),b.zb(3),b.kc("ngIf",a.loading),b.zb(1),b.kc("ngIf",!a.loading))},directives:[u.a,s.i,g.b,g.f,g.e,n.w,y.d,p.b,s.d,f.a,s.f,k.s,k.j,P.b,P.h,D.b,P.i,n.t,h.c,z.a,k.r,k.i],pipes:[n.d],styles:[".mat-slider-horizontal .mat-slider-track-background,.mat-slider-horizontal .mat-slider-track-fill,.mat-slider-horizontal .mat-slider-track-wrapper,.mat-slider-horizontal .mat-slider-wrapper{height:5px!important}app-new-advance .content-input input{font-size:18px;font-weight:700;text-align:center}app-new-advance .ctn-btn button{border-radius:50px;background-color:#41434c;color:#fff}app-new-advance .ctn-btn button:disabled{color:#fff!important;opacity:.5}"],encapsulation:2}),t})();var H=e("7RFJ"),M=e("RL7/"),L=e("jhN1");function F(t,a){1&t&&(b.Qb(0),b.Nb(1,"mat-spinner",5),b.Pb()),2&t&&(b.zb(1),b.kc("diameter",30))}function I(t,a){if(1&t){const t=b.Tb();b.Qb(0),b.Sb(1,"button",6),b.ac("click",(function(){return b.yc(t),b.ec().accept()})),b.Jc(2,"ACEPTAR"),b.Rb(),b.Sb(3,"button",6),b.ac("click",(function(){return b.yc(t),b.ec().cancel()})),b.Jc(4,"RECHAZAR"),b.Rb(),b.Pb()}}let N=(()=>{class t{constructor(t,a,e,n,i,o){this.dialogRef=t,this.data=a,this.snacBar=e,this.constant=n,this.auth=i,this.sanitizer=o,this.loading=!1,this.dialogRef.disableClose=!0}get urlCarta(){const t=localStorage.getItem("token");let a=`&amount=${this.data.advance.amount}&days=${this.data.advance.dayForPayment}&commision=${this.data.advance.comission}&totalAmount=${this.data.advance.totalWithhold}&totalWeek=${this.data.advance.totalWeek}`;return this.data.advance.dates.length>0&&(a=`${a}&dates=${this.data.advance.dates.join(",")}`),this.sanitizer.bypassSecurityTrustResourceUrl(`${this.constant.api}Users/GetCartaMandato?token=${t}${a}`)}accept(){this.loading=!0,this.data.service.requestAdvance(this.data.advance.amount,this.data.paysheet).subscribe(t=>{this.loading=!1,t.success?(this.dialogRef.close(!0),this.snacBar.openFromComponent(r.a,{data:{message:"EXITOSO",subMessage:"Se ha realizado la solicitud correctamente.",type:"success"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:2500})):(this.dialogRef.close(!1),this.snacBar.openFromComponent(r.a,{data:{message:"ERROR",subMessage:t.message,type:"error"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:3500}))},t=>{this.loading=!1,this.dialogRef.close(!1),this.snacBar.openFromComponent(r.a,{data:{message:"ERROR",subMessage:"Ocurrio un error intentalo mas tarde.",type:"error"},panelClass:"snack-message",horizontalPosition:"right",verticalPosition:"top",duration:3500})})}cancel(){this.dialogRef.close(!1)}}return t.\u0275fac=function(a){return new(a||t)(b.Mb(s.h),b.Mb(s.a),b.Mb(m.b),b.Mb(H.a),b.Mb(M.a),b.Mb(L.b))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-show-carta-mandato"]],decls:6,vars:3,consts:[[1,"dialog-content-wrapper"],["mat-dialog-content","",1,"pl-24","pr-24","m-0"],[1,"iframe-content",3,"src"],["mat-dialog-actions","","fxLayoutAlign","center center",1,"cnt-button"],[4,"ngIf"],[3,"diameter"],["mat-button","",1,"btn",3,"click"]],template:function(t,a){1&t&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Nb(2,"iframe",2),b.Rb(),b.Sb(3,"div",3),b.Hc(4,F,2,1,"ng-container",4),b.Hc(5,I,5,0,"ng-container",4),b.Rb(),b.Rb()),2&t&&(b.zb(2),b.kc("src",a.urlCarta,b.Ac),b.zb(2),b.kc("ngIf",a.loading),b.zb(1),b.kc("ngIf",!a.loading))},directives:[s.f,s.c,g.e,n.t,h.c,p.b],styles:["app-show-carta-mandato .dialog-content-wrapper .mat-dialog-content{max-height:none;background-image:url(loading.9a117e7790fe3298f22b.gif);background-repeat:no-repeat;background-position:50%}app-show-carta-mandato .dialog-content-wrapper .iframe-content{border:none;min-height:600px;min-width:450px}app-show-carta-mandato .dialog-content-wrapper .cnt-button{margin-bottom:12px;margin-top:12px}app-show-carta-mandato .dialog-content-wrapper .cnt-button .btn{background-color:#41434c;color:#fff;border-radius:20px}"],encapsulation:2}),t})();var T=e("4/4Q"),O=e("+ti9"),$=e("R0Ic"),Q=e("tmTa"),_=e("sCmA");const E=["cFolio"],q=["cDate"],j=["cAmount"],B=["cDatePayment"],Y=["cCommission"],K=["cInteres"],G=["cVat"],V=["total"];function X(t,a){1&t&&(b.Sb(0,"th",17,18),b.Jc(2," Folio "),b.Rb())}function U(t,a){if(1&t&&(b.Sb(0,"td",19),b.Jc(1),b.Rb()),2&t){const t=a.$implicit;b.zb(1),b.Lc(" ",t.id," ")}}function Z(t,a){1&t&&(b.Sb(0,"th",17,20),b.Jc(2," Fecha de Solicitud "),b.Rb())}function tt(t,a){if(1&t&&(b.Sb(0,"td",19),b.Jc(1),b.fc(2,"date"),b.Rb()),2&t){const t=a.$implicit;b.zb(1),b.Lc(" ",b.hc(2,1,t.created_at,"dd/MM/yyyy")," ")}}function at(t,a){1&t&&(b.Sb(0,"th",17,21),b.Jc(2," Cantidad "),b.Rb())}function et(t,a){if(1&t&&(b.Sb(0,"td",19),b.Jc(1),b.fc(2,"currency"),b.Rb()),2&t){const t=a.$implicit;b.zb(1),b.Lc(" ",b.gc(2,1,t.amount)," ")}}function nt(t,a){1&t&&(b.Sb(0,"th",17,22),b.Jc(2," Fecha de Cobro "),b.Rb())}function it(t,a){1&t&&b.Nb(0,"td",19)}function ot(t,a){1&t&&(b.Sb(0,"th",17,23),b.Jc(2," Comisi\xf3n "),b.Rb())}function ct(t,a){if(1&t&&(b.Sb(0,"td",19),b.Jc(1),b.fc(2,"currency"),b.Rb()),2&t){const t=a.$implicit;b.zb(1),b.Lc(" ",b.gc(2,1,t.comission)," ")}}function dt(t,a){1&t&&(b.Sb(0,"th",17,24),b.Jc(2," Inter\xe9s "),b.Rb())}function st(t,a){1&t&&b.Nb(0,"td",19)}function lt(t,a){1&t&&(b.Sb(0,"th",17,25),b.Jc(2," IVA "),b.Rb())}function rt(t,a){1&t&&b.Nb(0,"td",19)}function bt(t,a){1&t&&(b.Sb(0,"th",17,26),b.Jc(2," Total a Pagar "),b.Rb())}function mt(t,a){if(1&t&&(b.Sb(0,"td",19),b.Jc(1),b.fc(2,"currency"),b.Rb()),2&t){const t=a.$implicit;b.zb(1),b.Lc(" ",b.gc(2,1,t.total_Withhold)," ")}}const ut=function(t){return{width:t}};function pt(t,a){if(1&t&&b.Nb(0,"td",27),2&t){const t=b.ec(2);b.kc("ngStyle",b.oc(1,ut,t.cFolioWidth+"px"))}}function ft(t,a){if(1&t&&b.Nb(0,"td",27),2&t){const t=b.ec(2);b.kc("ngStyle",b.oc(1,ut,t.cDateWidth+"px"))}}function ht(t,a){if(1&t&&b.Nb(0,"td",27),2&t){const t=b.ec(2);b.kc("ngStyle",b.oc(1,ut,t.cAmountWidth+"px"))}}function gt(t,a){if(1&t&&(b.Sb(0,"del"),b.Jc(1),b.fc(2,"date"),b.Rb()),2&t){const t=b.ec().$implicit;b.zb(1),b.Kc(b.hc(2,1,t.detail.date_Payment,"dd/MM/yyyy"))}}function yt(t,a){if(1&t&&(b.Qb(0),b.Jc(1),b.fc(2,"date"),b.Pb()),2&t){const t=b.ec().$implicit;b.zb(1),b.Lc(" ",b.hc(2,1,t.detail.date_Payment,"dd/MM/yyyy")," ")}}const vt=function(t){return{width:t,"padding-left":"16px"}};function Rt(t,a){if(1&t&&(b.Sb(0,"td",27),b.Hc(1,gt,3,4,"del",32),b.Hc(2,yt,3,4,"ng-container",32),b.Rb()),2&t){const t=a.$implicit,e=b.ec(2);b.kc("ngStyle",b.oc(3,vt,e.cDatePaymentWidth+"px")),b.zb(1),b.kc("ngIf",e.payed(t.detail.date_Payment)),b.zb(1),b.kc("ngIf",!e.payed(t.detail.date_Payment))}}function xt(t,a){if(1&t&&b.Nb(0,"td",27),2&t){const t=b.ec(2);b.kc("ngStyle",b.oc(1,ut,t.cCommissionWidth+"px"))}}function St(t,a){if(1&t&&b.Nb(0,"td",27),2&t){const t=b.ec(2);b.kc("ngStyle",b.oc(1,ut,t.cInteresWidth+"px"))}}function wt(t,a){if(1&t&&b.Nb(0,"td",27),2&t){const t=b.ec(2);b.kc("ngStyle",b.oc(1,ut,t.cVatWith+"px"))}}function kt(t,a){if(1&t&&(b.Sb(0,"del"),b.Jc(1),b.fc(2,"currency"),b.Rb()),2&t){const t=b.ec().$implicit;b.zb(1),b.Kc(b.gc(2,1,t.detail.total_Payment))}}function Pt(t,a){if(1&t&&(b.Qb(0),b.Jc(1),b.fc(2,"currency"),b.Pb()),2&t){const t=b.ec().$implicit;b.zb(1),b.Lc(" ",b.gc(2,1,t.detail.total_Payment)," ")}}function Dt(t,a){if(1&t&&(b.Sb(0,"td",27),b.Hc(1,kt,3,3,"del",32),b.Hc(2,Pt,3,3,"ng-container",32),b.Rb()),2&t){const t=a.$implicit,e=b.ec(2);b.kc("ngStyle",b.oc(3,vt,e.cTotalWith+"px")),b.zb(1),b.kc("ngIf",e.payed(t.detail.date_Payment)),b.zb(1),b.kc("ngIf",!e.payed(t.detail.date_Payment))}}function zt(t,a){1&t&&b.Nb(0,"tr",33)}const Ct=function(){return{padding:0}};function Jt(t,a){if(1&t&&(b.Sb(0,"td",27),b.Sb(1,"div",28),b.Sb(2,"div",29),b.Sb(3,"table",30),b.Qb(4,2),b.Hc(5,pt,1,3,"td",13),b.Pb(),b.Qb(6,5),b.Hc(7,ft,1,3,"td",13),b.Pb(),b.Qb(8,6),b.Hc(9,ht,1,3,"td",13),b.Pb(),b.Qb(10,7),b.Hc(11,Rt,3,5,"td",13),b.Pb(),b.Qb(12,8),b.Hc(13,xt,1,3,"td",13),b.Pb(),b.Qb(14,9),b.Hc(15,St,1,3,"td",13),b.Pb(),b.Qb(16,10),b.Hc(17,wt,1,3,"td",13),b.Pb(),b.Qb(18,11),b.Hc(19,Dt,3,5,"td",13),b.Pb(),b.Hc(20,zt,1,0,"tr",31),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t){const t=a.$implicit,e=b.ec();b.kc("ngStyle",b.nc(5,Ct)),b.Ab("colspan",e.columnsToDisplay.length),b.zb(1),b.kc("@detailExpand",t==e.expandedElement?"expanded":"collapsed"),b.zb(2),b.kc("dataSource",e.orderDetails(t.details)),b.zb(17),b.kc("matRowDefColumns",e.columnsToDisplay)}}function Wt(t,a){1&t&&b.Nb(0,"tr",34)}function At(t,a){if(1&t){const t=b.Tb();b.Sb(0,"tr",35),b.ac("click",(function(){b.yc(t);const e=a.$implicit,n=b.ec();return n.expandedElement=n.expandedElement===e?null:e})),b.Rb()}if(2&t){const t=a.$implicit,e=b.ec();b.Db("expanded-row",e.expandedElement===t)}}function Ht(t,a){1&t&&b.Nb(0,"tr",36)}const Mt=function(){return["expandedDetail"]};let Lt=(()=>{class t{constructor(t,a){this.dialog=t,this.cdRef=a,this.dataSource=new Q.o([]),this.columnsToDisplay=["folio","date","amount","date_payment","commission","interes","vat","total"],this.cFolioWidth=0,this.cDateWidth=0,this.cAmountWidth=0,this.cDatePaymentWidth=0,this.cCommissionWidth=0,this.cInteresWidth=0,this.cVatWith=0,this.cTotalWith=0,this.changePage=new b.n}set data(t){this.dataSource=new Q.o(t)}ngOnInit(){setTimeout(()=>{this.updatedWidthColumns()},500)}changeTable(t){this.changePage.emit(t)}orderDetails(t){return t.sort((t,a)=>t.detail.date_Payment>a.detail.date_Payment?1:0)}updatedWidthColumns(){this.cFolioWidth=this.cFolio.nativeElement.clientWidth,this.cDateWidth=this.cDate.nativeElement.clientWidth,this.cAmountWidth=this.cAmount.nativeElement.clientWidth,this.cDatePaymentWidth=this.cDatePayment.nativeElement.clientWidth,this.cCommissionWidth=this.cCommission.nativeElement.clientWidth,this.cInteresWidth=this.cInteres.nativeElement.clientWidth,this.cVatWith=this.cVat.nativeElement.clientWidth,this.cTotalWith=this.cTotal.nativeElement.clientWidth,this.cdRef.detectChanges()}payed(t){let a=c(t).weekday(),e=c(t);return 0===a&&(a=7),a<6?e=e.add(5-a,"days"):6===a?e=e.add(6,"days"):7===a&&(e=e.add(5,"days")),e<c()}}return t.\u0275fac=function(a){return new(a||t)(b.Mb(s.b),b.Mb(b.h))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-table-advance"]],viewQuery:function(t,a){var e;1&t&&(b.Oc(E,!0),b.Oc(q,!0),b.Oc(j,!0),b.Oc(B,!0),b.Oc(Y,!0),b.Oc(K,!0),b.Oc(G,!0),b.Oc(V,!0),b.Fc(_.a,!0)),2&t&&(b.tc(e=b.bc())&&(a.cFolio=e.first),b.tc(e=b.bc())&&(a.cDate=e.first),b.tc(e=b.bc())&&(a.cAmount=e.first),b.tc(e=b.bc())&&(a.cDatePayment=e.first),b.tc(e=b.bc())&&(a.cCommission=e.first),b.tc(e=b.bc())&&(a.cInteres=e.first),b.tc(e=b.bc())&&(a.cVat=e.first),b.tc(e=b.bc())&&(a.cTotal=e.first),b.tc(e=b.bc())&&(a.paginator=e.first))},inputs:{data:"data",totalRow:"totalRow"},outputs:{changePage:"changePage"},decls:31,vars:5,consts:[["mat-table","","multiTemplateDataRows","",3,"dataSource"],["table",""],["matColumnDef","folio"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","amount"],["matColumnDef","date_payment"],["matColumnDef","commission"],["matColumnDef","interes"],["matColumnDef","vat"],["matColumnDef","total"],["matColumnDef","expandedDetail"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["cFolio",""],["mat-cell",""],["cDate",""],["cAmount",""],["cDatePayment",""],["cCommission",""],["cInteres",""],["cVat",""],["total",""],["mat-cell","",3,"ngStyle"],[1,"element-detail"],[1,"element-description"],["mat-table","",1,"sub-table",3,"dataSource"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-row",""],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"detail-row"]],template:function(t,a){1&t&&(b.Sb(0,"table",0,1),b.Qb(2,2),b.Hc(3,X,3,0,"th",3),b.Hc(4,U,2,1,"td",4),b.Pb(),b.Qb(5,5),b.Hc(6,Z,3,0,"th",3),b.Hc(7,tt,3,4,"td",4),b.Pb(),b.Qb(8,6),b.Hc(9,at,3,0,"th",3),b.Hc(10,et,3,3,"td",4),b.Pb(),b.Qb(11,7),b.Hc(12,nt,3,0,"th",3),b.Hc(13,it,1,0,"td",4),b.Pb(),b.Qb(14,8),b.Hc(15,ot,3,0,"th",3),b.Hc(16,ct,3,3,"td",4),b.Pb(),b.Qb(17,9),b.Hc(18,dt,3,0,"th",3),b.Hc(19,st,1,0,"td",4),b.Pb(),b.Qb(20,10),b.Hc(21,lt,3,0,"th",3),b.Hc(22,rt,1,0,"td",4),b.Pb(),b.Qb(23,11),b.Hc(24,bt,3,0,"th",3),b.Hc(25,mt,3,3,"td",4),b.Pb(),b.Qb(26,12),b.Hc(27,Jt,21,6,"td",13),b.Pb(),b.Hc(28,Wt,1,0,"tr",14),b.Hc(29,At,1,2,"tr",15),b.Hc(30,Ht,1,0,"tr",16),b.Rb()),2&t&&(b.kc("dataSource",a.dataSource),b.zb(28),b.kc("matHeaderRowDef",a.columnsToDisplay),b.zb(1),b.kc("matRowDefColumns",a.columnsToDisplay),b.zb(1),b.kc("matRowDefColumns",b.nc(4,Mt)))},directives:[Q.n,Q.c,Q.i,Q.b,Q.k,Q.m,Q.h,Q.a,n.w,y.d,n.t,Q.l,Q.j],pipes:[n.f,n.d],styles:["app-table-advance table{width:100%;border-radius:5px;border:1px solid #cacee6}app-table-advance table tr.back-color-row{background-color:#f9f9f9}app-table-advance table tr.detail-row{height:0}app-table-advance table tr.detail-row:not(.expanded-row):hover{background-color:#f5f5f5}app-table-advance table tr.detail-row:not(.expanded-row):active{background-color:#efefef}app-table-advance table tr.detail-row td .element-detail{overflow:hidden;display:flex}app-table-advance table tr.detail-row td .element-detail table{width:100%;border:none}app-table-advance table tr.detail-row td .element-detail table del{color:red}"],encapsulation:2,data:{animation:[Object($.p)("detailExpand",[Object($.m)("collapsed",Object($.n)({height:"0px",minHeight:"0"})),Object($.m)("expanded",Object($.n)({height:"*"})),Object($.o)("expanded <=> collapsed",Object($.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();function Ft(t,a){1&t&&(b.Sb(0,"div",15),b.Nb(1,"mat-spinner",16),b.Rb()),2&t&&(b.zb(1),b.kc("diameter",30))}const It=function(){return{"font-family":"MontserratBold"}},Nt=[{path:"",component:(()=>{class t{constructor(t,a){this.service=t,this.matDialog=a,this.data=[],this.loading=!1,this.totalRow=0,this.nextDatePayment=c();let e=this.nextDatePayment.weekday();0===e&&(e=7),e<6?this.nextDatePayment=this.nextDatePayment.add(5-e,"days"):6===e?this.nextDatePayment=this.nextDatePayment.add(6,"days"):7===e&&(this.nextDatePayment=this.nextDatePayment.add(5,"days"))}ngOnInit(){this.getAdvances()}getAdvances(){this.loading=!0,this.service.getMyAdvances().subscribe(t=>{var a,e,n,i;const o=null!==(e=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.befores)&&void 0!==e?e:[],c=null!==(i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.currents)&&void 0!==i?i:[];this.data=o.concat(c)},t=>{},()=>{this.loading=!1})}newRequest(t){this.matDialog.open(A,{data:{service:this.service,paysheet:t}}).afterClosed().subscribe(a=>{(null==a?void 0:a.amount)&&a.amount>0&&this.confirmRequest(a.amount,t)})}confirmRequest(t,a){this.matDialog.open(w,{data:{service:this.service,amount:t,paysheet:a}}).afterClosed().subscribe(e=>{console.log(e),("boolean"!=typeof e||e)&&this.showCarta(e,t,a)})}showCarta(t,a,e){this.matDialog.open(N,{data:{advance:{amount:a,dayForPayment:t.dayForPayment,comission:t.comission,totalWithhold:t.totalWithhold,dates:t.dates,totalWeek:t.totalWeek},service:this.service,paysheet:e}}).afterClosed().subscribe(t=>{this.getAdvances()})}uploadPayrollReceipt(){this.matDialog.open(T.a,{data:{service:this.service}}).afterClosed().subscribe(t=>{"boolean"!=typeof t&&this.newRequest(t)})}get totalToPay(){return this.data.reduce((t,a)=>t+a.details.filter(t=>c(t.detail.date_Payment).format("DD/MM/YYYY")==this.nextDatePayment.format("DD/MM/YYYY")).reduce((t,a)=>t+a.detail.total_Payment,0),0)}}return t.\u0275fac=function(a){return new(a||t)(b.Mb(O.a),b.Mb(s.b))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-request-advance"]],decls:27,vars:11,consts:[[1,"container","module-container"],["fxLayout","row","fxLayoutAlign","space-between end",1,"content-breadcrumbs"],[3,"ngStyle"],[1,"breadcrumbs"],[1,"content-table","mat-elevation-z3"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutAlign","space-between center"],["fxFlex","30","fxFle.sm","100","fxFlex.xs","100"],[1,"title"],[1,"line"],["fxFlex","30","fxFle.sm","100","fxFlex.xs","100","fxLayoutAlign","end center"],[1,"ctn-btn"],["mat-button","",3,"click"],["id","contentTable",1,"table"],["class","content-loading",4,"ngIf"],[3,"data","totalRow"],[1,"content-loading"],[3,"diameter"]],template:function(t,a){1&t&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"div"),b.Sb(3,"h1",2),b.Jc(4,"Pedir Paro"),b.Rb(),b.Sb(5,"div",3),b.Jc(6,"Snac > Pedir Paro"),b.Rb(),b.Rb(),b.Sb(7,"div"),b.Sb(8,"p"),b.Sb(9,"b"),b.Jc(10),b.Rb(),b.Jc(11),b.fc(12,"currency"),b.Rb(),b.Rb(),b.Rb(),b.Sb(13,"div",4),b.Sb(14,"div",5),b.Sb(15,"div",6),b.Sb(16,"div",7),b.Sb(17,"h3",2),b.Jc(18,"Adelantos"),b.Rb(),b.Nb(19,"span",8),b.Rb(),b.Rb(),b.Sb(20,"div",9),b.Sb(21,"div",10),b.Sb(22,"button",11),b.ac("click",(function(){return a.uploadPayrollReceipt()})),b.Jc(23,"Pedir Paro"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(24,"div",12),b.Hc(25,Ft,2,1,"div",13),b.Nb(26,"app-table-advance",14),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.zb(3),b.kc("ngStyle",b.nc(9,It)),b.zb(7),b.Lc("Total a pagar (",a.nextDatePayment.format("DD/MM/YYYY"),"): "),b.zb(1),b.Kc(b.gc(12,7,a.totalToPay)),b.zb(6),b.kc("ngStyle",b.nc(10,It)),b.zb(8),b.kc("ngIf",a.loading),b.zb(1),b.kc("data",a.data)("totalRow",a.totalRow))},directives:[g.f,g.e,n.w,y.d,g.b,p.b,n.t,Lt,h.c],pipes:[n.d],styles:["app-request-advance .container{padding:25px}app-request-advance .container .content-breadcrumbs h1{color:#41434c;font-size:27px}app-request-advance .container .content-table{margin-top:25px;background-color:#fff;padding:20px;height:calc(100% - 92px);border-top-left-radius:10px;border-top-right-radius:10px}@media (max-width:959px){app-request-advance .container .content-table{height:auto;border-top-left-radius:10px;border-top-right-radius:10px}}app-request-advance .container .content-table .title h3{margin:0;color:#41434c;font-size:20px}app-request-advance .container .content-table .title .line{background-color:#65bcb5;width:78px;height:5px;display:block;border-radius:5px}app-request-advance .container .content-table .ctn-btn button{border-radius:50px;background-color:#41434c;color:#fff}app-request-advance .container .content-table .table{margin-top:25px;overflow:auto!important;position:relative;height:calc(100% - 55px)}app-request-advance .container .content-table .table .content-loading{position:absolute;display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:hsla(0,0%,100%,.5);z-index:101}"],encapsulation:2,data:{animation:d.a}}),t})()}];let Tt=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(a){return new(a||t)},imports:[[o.h.forChild(Nt)],o.h]}),t})(),Ot=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(a){return new(a||t)},providers:[O.a],imports:[[n.c,i.a,Tt]]}),t})()}}]);