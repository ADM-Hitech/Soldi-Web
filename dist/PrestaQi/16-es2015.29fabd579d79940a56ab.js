(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"7QPh":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("fXoL"),c=a("RL7/"),o=a("tyNb"),i=a("jtrZ");let r=(()=>{class t{constructor(t,e,a,n){this.auth=t,this.router=e,this.routeActivate=a,this.appConfig=n,n.lastRoute=""}canActivate(t,e){return this.auth.isAuthenticated()?!!this.auth.checkRols(t.data.roles)||(this.router.navigate(["/"]),!1):(this.appConfig.lastRoute=e.url,this.router.navigate(["login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(c.a),n.Wb(o.d),n.Wb(o.a),n.Wb(i.a))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"98L1":function(t,e,a){"use strict";a.r(e),a.d(e,"AccountStatusLicenseModule",(function(){return W}));var n=a("ofXK"),c=a("4TcP"),o=a("tyNb"),i=a("7QPh"),r=a("ZtiS"),s=a("tmTa"),l=a("j14s"),u=a("Xxza"),d=a("1yaQ"),b=a("wd/R"),p=a("3Pt+"),h=a("fXoL"),f=a("tk/3"),m=a("7RFJ");let g=(()=>{class t{constructor(t,e){this.http=t,this.constant=e}fetchMovement(t=1,e=50,a="",n=0,c=0,o=0){return this.http.get(`${this.constant.api}Movement?LicenseId=${n}&Page=${t}&NumRecord=${e}&Filter=${a}&Year=${c}&Month=${o}`)}fetchLicensePriceRange(t){let e="";return t&&(e="?LicenseId="+t),this.http.get(`${this.constant.api}LicensePriceRange${e}`)}}return t.\u0275fac=function(e){return new(e||t)(h.Wb(f.b),h.Wb(m.a))},t.\u0275prov=h.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var R=a("znSr"),S=a("XiUz"),v=a("IRfi"),y=a("A2Vd"),w=a("/o1g"),x=a("G/Ji"),L=a("3uU/"),z=a("sCmA");function P(t,e){1&t&&(h.Sb(0,"th",11),h.Jc(1," Accreditado "),h.Rb())}function M(t,e){if(1&t&&(h.Sb(0,"td",12),h.Jc(1),h.Rb()),2&t){const t=e.$implicit;h.zb(1),h.Mc(" ",null==t||null==t.accredited?null:t.accredited.first_Name," ",null==t||null==t.accredited?null:t.accredited.last_Name,"")}}function k(t,e){1&t&&(h.Sb(0,"th",11),h.Jc(1," Monto "),h.Rb())}function I(t,e){if(1&t&&(h.Sb(0,"td",12),h.Jc(1),h.fc(2,"currency"),h.Rb()),2&t){const t=e.$implicit;h.zb(1),h.Lc(" ",h.gc(2,1,t.amount)," ")}}function Y(t,e){1&t&&(h.Sb(0,"th",11),h.Jc(1," Fecha "),h.Rb())}function J(t,e){if(1&t&&(h.Sb(0,"td",12),h.Jc(1),h.fc(2,"date"),h.Rb()),2&t){const t=e.$implicit;h.zb(1),h.Lc(" ",h.gc(2,1,t.created_at)," ")}}function C(t,e){1&t&&(h.Sb(0,"th",11),h.Jc(1," Estatus "),h.Rb())}function H(t,e){if(1&t&&(h.Sb(0,"td",12),h.Jc(1),h.Rb()),2&t){const t=e.$implicit;h.zb(1),h.Lc(" ",null==t||null==t.speiResponse?null:t.speiResponse.state_Name," ")}}function N(t,e){1&t&&h.Nb(0,"tr",13)}function A(t,e){1&t&&h.Nb(0,"tr",14)}const D=function(){return[50,100,500]};let F=(()=>{class t{constructor(){this.columnsToDisplay=["accredited","amount","date","status"],this.dataSource=new s.o,this.changePage=new h.n}changeTable(t){this.changePage.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Gb({type:t,selectors:[["app-table-movements"]],inputs:{totalRow:"totalRow",dataSource:"dataSource"},outputs:{changePage:"changePage"},decls:17,vars:7,consts:[["mat-table","",3,"dataSource"],["table",""],["matColumnDef","accredited"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","amount"],["matColumnDef","date"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(h.Sb(0,"table",0,1),h.Qb(2,2),h.Hc(3,P,2,0,"th",3),h.Hc(4,M,2,2,"td",4),h.Pb(),h.Qb(5,5),h.Hc(6,k,2,0,"th",3),h.Hc(7,I,3,3,"td",4),h.Pb(),h.Qb(8,6),h.Hc(9,Y,2,0,"th",3),h.Hc(10,J,3,3,"td",4),h.Pb(),h.Qb(11,7),h.Hc(12,C,2,0,"th",3),h.Hc(13,H,2,1,"td",4),h.Pb(),h.Hc(14,N,1,0,"tr",8),h.Hc(15,A,1,0,"tr",9),h.Rb(),h.Sb(16,"mat-paginator",10),h.ac("page",(function(t){return e.changeTable(t)})),h.Rb()),2&t&&(h.kc("dataSource",e.dataSource),h.zb(14),h.kc("matHeaderRowDef",e.columnsToDisplay),h.zb(1),h.kc("matRowDefColumns",e.columnsToDisplay),h.zb(1),h.kc("length",e.totalRow)("pageSize",50)("pageSizeOptions",h.nc(6,D)))},directives:[s.n,s.c,s.i,s.b,s.k,s.m,z.a,s.h,s.a,s.j,s.l],pipes:[n.d,n.f],styles:["app-table-movements{width:100%}app-table-movements table{width:100%;border-radius:5px;border:1px solid #cacee6}app-table-movements table tr.back-color-row{background-color:#f9f9f9}"],encapsulation:2,data:{animation:u.a}}),t})();function $(t,e){1&t&&(h.Sb(0,"div",15),h.Nb(1,"mat-spinner",16),h.Rb()),2&t&&(h.zb(1),h.kc("diameter",25))}const O=function(){return{"font-family":"MontserratBold"}},T=[{path:"",component:(()=>{class t{constructor(t,e){this.restService=t,this.route=e,this.licensePriceRange=[],this.dataSource=new s.o,this.totalRow=0,this.loading=!1,this.licenseId=0,this.totalForOperation=0,this.comition=3.5,this.date=new p.g(b()),this.currentPage=1,this.currentNumRecord=50,this.licenseId=this.route.snapshot.params.licenseid,this.fetchMovement()}fetchMovement(t=1,e=50,a="",n=0,c=0){this.currentPage=t,this.currentNumRecord=e,this.loading=!0,0===n&&(n=this.date.value.year()),0===c&&(c=this.date.value.month()+1),this.restService.fetchMovement(t,e,a,this.licenseId,n,c).subscribe(t=>{this.loading=!1,this.dataSource.data=t.data.data,this.totalRow=t.data.totalRecord,this.licensePriceRange.length>=0&&this.fetchLicensePriceRange()})}changePage(t){this.fetchMovement(t.pageIndex+1,t.pageSize,"")}fetchLicensePriceRange(){this.restService.fetchLicensePriceRange(this.licenseId).subscribe(t=>{this.licensePriceRange=t.data;const e=this.licensePriceRange.filter(t=>this.totalRow>=t.initialQuantity&&this.totalRow<=t.finalQuantity).sort((t,e)=>t.licenseId>e.licenseId?-1:t.licenseId<e.licenseId?1:0);e.length>0&&(this.totalForOperation=e[0].cost)})}get priceUnit(){var t,e;return(null!==(t=this.totalForOperation)&&void 0!==t?t:1)/(null!==(e=this.totalRow)&&void 0!==e?e:1)}get total(){return 1.16*(this.totalForOperation+this.comition)}chosenYearHandler(t){const e=this.date.value;e.year(t.year()),this.date.setValue(e)}chosenMonthHandler(t,e){const a=this.date.value;a.month(t.month()),this.date.setValue(a),e.close(),this.fetchMovement(this.currentPage,this.currentNumRecord)}}return t.\u0275fac=function(e){return new(e||t)(h.Mb(g),h.Mb(o.a))},t.\u0275cmp=h.Gb({type:t,selectors:[["app-account-status-license"]],features:[h.yb([{provide:l.c,useClass:d.b,deps:[l.g,d.a]},{provide:l.f,useValue:{parse:{dateInput:"MM/YYYY"},display:{dateInput:"MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}])],decls:41,vars:27,consts:[[1,"container","module-container"],[1,"content-breadcrumbs"],[3,"ngStyle"],[1,"breadcrumbs"],[1,"content-body","mat-elevation-z3"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutAlign","space-between end"],["fxFlex","30","fxFlex.sm","100","fxFlex.xs","100"],["appearance","outline"],["matInput","","placeholder","Mes y A\xf1o",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"yearSelected","monthSelected"],["dp",""],["fxLayout","row",1,"content-table"],["class","content-loading",4,"ngIf"],[3,"totalRow","dataSource","changePage"],[1,"content-loading"],[3,"diameter"]],template:function(t,e){if(1&t){const t=h.Tb();h.Sb(0,"div",0),h.Sb(1,"div",1),h.Sb(2,"h1",2),h.Jc(3,"Estado de cuenta"),h.Rb(),h.Sb(4,"div",3),h.Jc(5,"SNAC > Licencia > Estado de cuenta"),h.Rb(),h.Rb(),h.Sb(6,"div",4),h.Sb(7,"div",5),h.Sb(8,"div",6),h.Sb(9,"p"),h.Jc(10),h.Rb(),h.Sb(11,"p"),h.Jc(12),h.fc(13,"currency"),h.Rb(),h.Sb(14,"p"),h.Jc(15),h.fc(16,"currency"),h.Rb(),h.Sb(17,"p"),h.Jc(18),h.fc(19,"currency"),h.Rb(),h.Rb(),h.Sb(20,"div",6),h.Sb(21,"mat-form-field",7),h.Sb(22,"mat-label"),h.Jc(23,"Periodo (MM/YYYY)"),h.Rb(),h.Nb(24,"input",8),h.Nb(25,"mat-datepicker-toggle",9),h.Sb(26,"mat-datepicker",10,11),h.ac("yearSelected",(function(t){return e.chosenYearHandler(t)}))("monthSelected",(function(a){h.yc(t);const n=h.uc(27);return e.chosenMonthHandler(a,n)})),h.Rb(),h.Rb(),h.Sb(28,"p"),h.Jc(29),h.fc(30,"currency"),h.Rb(),h.Sb(31,"p"),h.Jc(32),h.fc(33,"currency"),h.Rb(),h.Sb(34,"p"),h.Jc(35),h.fc(36,"currency"),h.Rb(),h.Rb(),h.Rb(),h.Nb(37,"mat-divider"),h.Sb(38,"div",12),h.Hc(39,$,2,1,"div",13),h.Sb(40,"app-table-movements",14),h.ac("changePage",(function(t){return e.changePage(t)})),h.Rb(),h.Rb(),h.Rb(),h.Rb()}if(2&t){const t=h.uc(27);h.zb(2),h.kc("ngStyle",h.nc(26,O)),h.zb(8),h.Lc("Operaciones enviadas: ",e.totalRow,""),h.zb(2),h.Lc("Precio Unitario: ",h.gc(13,14,e.priceUnit),""),h.zb(3),h.Lc("Total precio operaciones: ",h.gc(16,16,e.totalForOperation),""),h.zb(3),h.Lc("Cuota Infraestructura tecnologica: ",h.gc(19,18,e.comition),""),h.zb(6),h.kc("matDatepicker",t)("formControl",e.date),h.zb(1),h.kc("for",t),h.zb(4),h.Lc("Subtotal: ",h.gc(30,20,e.totalForOperation+e.comition),""),h.zb(3),h.Lc("IVA: ",h.gc(33,22,e.total-(e.totalForOperation+e.comition)),""),h.zb(3),h.Lc("Total: ",h.gc(36,24,e.total),""),h.zb(4),h.kc("ngIf",e.loading),h.zb(1),h.kc("totalRow",e.totalRow)("dataSource",e.dataSource)}},directives:[n.w,R.d,S.f,S.e,S.b,v.b,v.f,y.b,w.f,p.c,p.r,p.h,w.h,v.i,w.d,L.a,n.t,F,x.c],pipes:[n.d],styles:["app-account-status-license .container{padding:25px!important}@media (max-width:959px){app-account-status-license .container{overflow:auto}}app-account-status-license .container .content-breadcrumbs h1{color:#006;font-size:27px}app-account-status-license .content-body{margin-top:25px;background-color:#fff;padding:20px;height:calc(100% - 92px);border-top-left-radius:10px;border-top-right-radius:10px}@media (max-width:959px){app-account-status-license .content-body{height:auto;border-top-left-radius:10px;border-top-right-radius:10px}}app-account-status-license .content-body .content-table{overflow:auto!important;position:relative;margin-top:24px}app-account-status-license .content-body .content-table .content-loading{position:absolute;display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:hsla(0,0%,100%,.5);z-index:101}app-account-status-license .mat-form-field-appearance-outline .mat-form-field-prefix,app-account-status-license .mat-form-field-appearance-outline .mat-form-field-suffix{top:.65em}"],encapsulation:2,data:{animation:u.a}}),t})(),canActivate:[i.a,r.a],data:{roles:["Administrador","License"]}}];let Q=(()=>{class t{}return t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({factory:function(e){return new(e||t)},imports:[[o.h.forChild(T)],o.h]}),t})(),W=(()=>{class t{}return t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({factory:function(e){return new(e||t)},providers:[g],imports:[[n.c,c.a,Q]]}),t})()},ZtiS:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("fXoL"),c=a("RL7/"),o=a("tyNb");let i=(()=>{class t{constructor(t,e){this.auth=t,this.router=e}canActivate(t,e){return!!this.auth.checkRols(t.data.roles)||(this.router.navigate(["login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(c.a),n.Wb(o.d))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);